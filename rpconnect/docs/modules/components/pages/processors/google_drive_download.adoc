= google_drive_download
:type: processor
:status: experimental
:categories: ["Unstructured"]



////
     THIS FILE IS AUTOGENERATED!

     To make changes, edit the corresponding source file under:

     https://github.com/redpanda-data/connect/tree/main/internal/impl/<provider>.

     And:

     https://github.com/redpanda-data/connect/tree/main/cmd/tools/docs_gen/templates/plugin.adoc.tmpl
////

// Â© 2024 Redpanda Data Inc.


component_type_dropdown::[]


Downloads files from Google Drive


[tabs]
======
Common::
+
--

```yml
# Common config fields, showing default values
label: ""
google_drive_download:
  credentials_json: "" # No default (optional)
  file_id: "" # No default (required)
  mime_type: "" # No default (required)
```

--
Advanced::
+
--

```yml
# All config fields, showing default values
label: ""
google_drive_download:
  credentials_json: "" # No default (optional)
  file_id: "" # No default (required)
  mime_type: "" # No default (required)
  export_mime_types:
    application/vnd.google-apps.document: text/markdown
    application/vnd.google-apps.drawing: image/png
    application/vnd.google-apps.presentation: application/pdf
    application/vnd.google-apps.script: application/vnd.google-apps.script+json
    application/vnd.google-apps.spreadsheet: text/csv
```

--
======

Can download a file from Google Drive based on a file ID.
== Authentication
By default, this connector will use Google Application Default Credentials (ADC) to authenticate with Google APIs.

To use this mechanism locally, the following gcloud commands can be used:

	# Login for the application default credentials and add scopes for readonly drive access
	gcloud auth application-default login --scopes='openid,https://www.googleapis.com/auth/userinfo.email,https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/drive.readonly'
	# When logging in with a user account, you may need to set the quota project for the application default credentials
	gcloud auth application-default set-quota-project <project-id>

Otherwise if using a service account, you can create a JSON key for the service account and set it in the `credentials_json` field.
In order for a service account to access files in Google Drive either files need to be explicitly shared with the service account email, otherwise https://support.google.com/a/answer/162106[^domain wide delegation] can be used to share all files within a Google Workspace.


== Fields

=== `credentials_json`

A service account credentials JSON file. If left unset then the application default credentials are used.
[CAUTION]
====
This field contains sensitive information that usually shouldn't be added to a config directly, read our xref:configuration:secrets.adoc[secrets page for more info].
====



*Type*: `string`


=== `file_id`

The file ID of the file to download.
This field supports xref:configuration:interpolation.adoc#bloblang-queries[interpolation functions].


*Type*: `string`


=== `mime_type`

The mime type of the file in drive.
This field supports xref:configuration:interpolation.adoc#bloblang-queries[interpolation functions].


*Type*: `string`


=== `export_mime_types`

A map of Google Drive MIME types to their export formats. The key is the MIME type, and the value is the export format. See https://developers.google.com/workspace/drive/api/guides/ref-export-formats[^Google Drive API Documentation] for a list of supported export types


*Type*: `object`

*Default*: `{"application/vnd.google-apps.document":"text/markdown","application/vnd.google-apps.drawing":"image/png","application/vnd.google-apps.presentation":"application/pdf","application/vnd.google-apps.script":"application/vnd.google-apps.script+json","application/vnd.google-apps.spreadsheet":"text/csv"}`

```yml
# Examples

export_mime_types:
  application/vnd.google-apps.document: application/pdf
  application/vnd.google-apps.drawing: application/pdf
  application/vnd.google-apps.presentation: application/pdf
  application/vnd.google-apps.spreadsheet: application/pdf

export_mime_types:
  application/vnd.google-apps.document: application/vnd.openxmlformats-officedocument.wordprocessingml.document
  application/vnd.google-apps.drawing: image/svg+xml
  application/vnd.google-apps.presentation: application/vnd.openxmlformats-officedocument.presentationml.presentation
  application/vnd.google-apps.spreadsheet: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
```

== Examples

[tabs]
======
Download files from Google Drive::
+
--

This examples downloads all the files from Google Drive

```yaml
pipeline:
  processors:
    - google_drive_search:
        query: "name = 'Test Doc'"
    - google_drive_download:
        file_id: "${!this.id}"
        mime_type: "${!this.mimeType}"
```

--
======


